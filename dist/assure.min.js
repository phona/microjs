!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).assure=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.post=exports.get=exports.all=exports.wrap=void 0;var STATE,request_1=require("./helps/request"),http_error_1=require("./helps/http-error"),arrays_1=require("./helps/arrays");!function(STATE){STATE[STATE.PENDING=0]="PENDING",STATE[STATE.FULFILLED=1]="FULFILLED",STATE[STATE.REJECTED=2]="REJECTED"}(STATE=STATE||{});var noop=function(){return undefined},Assure=function(){function Assure(asyncfn){if("function"!=typeof(this.asyncfn=asyncfn))throw new TypeError("Assure resolver is not a function");this.children=[],this.result=null,this.state=STATE.PENDING,this.onResolved=null,this.onRejected=null}return Assure.prototype.getResult=function(){return this.result},Assure.prototype.pipe=function(next){next.state=this.state,this.then(function(arg){next.state=STATE.FULFILLED,next.result=arg,arrays_1.forEach(next.children,function(child){return child.process(arg)})},function(e){next.state=STATE.REJECTED,next.result=e,arrays_1.forEach(next.children,function(child){return child.process(e)})})},Assure.prototype.process=function(result){if((this.result=result)instanceof Assure)result.pipe(this);else if(result instanceof Error){var subResult_1=result;if(this.onRejected&&"function"==typeof this.onRejected)try{if((subResult_1=this.onRejected(result))instanceof Assure)return void subResult_1.pipe(this);this.result=subResult_1}catch(e){this.result=subResult_1=e}this.state=STATE.REJECTED,arrays_1.forEach(this.children,function(subChild){return subChild.process(subResult_1)})}else{var subResult_2=result;if(this.onResolved&&"function"==typeof this.onResolved)try{if(subResult_2=this.onResolved(result),this.state=STATE.FULFILLED,subResult_2 instanceof Assure)return void subResult_2.pipe(this);subResult_2!==undefined&&(this.result=subResult_2)}catch(e){this.result=subResult_2=e,this.state=STATE.REJECTED}else this.state=STATE.FULFILLED;arrays_1.forEach(this.children,function(subChild){return subChild.process(subResult_2)})}},Assure.prototype.invokeAsyncFn=function(){var _this=this;if(this.asyncfn!==noop){try{this.asyncfn(function(arg){_this.state=STATE.FULFILLED,_this.process(arg)},function(error){_this.state=STATE.REJECTED,_this.process(error)})}catch(e){this.state=STATE.REJECTED,this.process(e)}}},Assure.prototype.then=function(onResolved,onRejected){var assure=new Assure(noop);return assure.onResolved=onResolved,assure.onRejected=onRejected,this.children.push(assure),this.state!==STATE.PENDING?assure.process(this.result):this.invokeAsyncFn(),assure},Assure.prototype.capture=function(onError){var assure=new Assure(noop);return assure.onRejected=onError,this.children.push(assure),this.state!==STATE.PENDING?assure.process(this.result):this.invokeAsyncFn(),assure},Assure}();function wrap(fn){return new Assure(fn)}function all(assures){return new Assure(function(resolve,reject){var results=[];arrays_1.forEach(assures,function(assure,index){assure.then(function(result){results[index]=result,results.length!==assures.length||arrays_1.includes(results,undefined)||resolve(results)}).capture(function(e){reject(e)})})})}function get(config){return wrap(function(resolve,reject){var option={url:config.url,method:"GET",data:config.data,headers:config.headers,timeout:config.timeout,async:config.async,success:function(content){return resolve(content)},error:function(status,content){return reject(new http_error_1["default"](status,content))}};request_1["default"](option)})}function post(config){return wrap(function(resolve,reject){var option={url:config.url,method:"POST",data:config.data,headers:config.headers,timeout:config.timeout,async:config.async,success:function(content){return resolve(content)},error:function(status,content){return reject(new http_error_1["default"](status,content))}};request_1["default"](option)})}exports.wrap=wrap,exports.all=all,exports.get=get,exports.post=post,exports["default"]={wrap:wrap,all:all,get:get,post:post,HttpError:http_error_1["default"],STATE:STATE,VERSION:2.1}},{"./helps/arrays":2,"./helps/http-error":3,"./helps/request":4}],2:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.forEach=exports.includes=void 0,exports.includes=function(array,item){return 0<=array.indexOf(item)},exports.forEach=function(array,fn){for(var i=0;i<array.length;i++)fn(array[i],i)}},{}],3:[function(require,module,exports){"use strict";var extendStatics,__extends=this&&this.__extends||(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)});exports.__esModule=!0;var HttpError=function(_super){function HttpError(status,describe){var _this=this;return describe=describe||"HttpError: "+status,(_this=_super.call(this,describe)||this).status=status,_this.describe=describe,_this}return __extends(HttpError,_super),HttpError}(Error);exports["default"]=HttpError},{}],4:[function(require,module,exports){"use strict";exports.__esModule=!0;var noop=function(){return undefined};var HttpRequest=function(){function HttpRequest(){this.isTimeout=!1,this.timeoutFlag=null}return HttpRequest.prototype.send=function(params){var str,url,body,data,_this=this,headers=params.headers||{},method=(params.method||"GET").toUpperCase(),async=params.async===undefined||params.async,success=params.success||noop,error=params.error||noop,timeout=params.timeout;headers["Content-Type"]||(headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),body="GET"===method?(str="string"==typeof(data=params.data||"")?data:"?"+function(obj){var result=[];for(var key in obj)result.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key].toString()));return result.join("&")}(data),url=params.data?params.url+str:params.url,null):(data=params.data||"",url=params.url,"string"==typeof data?data:function(obj){var result=[];for(var key in obj)result.push(key+"="+obj[key].toString());return""+result.join("&")}(data));var req=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var _i=0,versions_1=["Microsoft","msxm3","msxml2","msxml1"];_i<versions_1.length;_i++){var version=versions_1[_i];try{return new ActiveXObject(version+".XMLHTTP")}catch(e){}}return null}();for(var field in req.open(method,url,async),req.onreadystatechange=function(){if(4===req.readyState){if(timeout!==undefined){if(_this.isTimeout)return;clearTimeout(_this.timeoutFlag)}200<=req.status&&req.status<300||304===req.status?success(req.responseText):error(req.status,req.statusText)}},headers)req.setRequestHeader(field,headers[field]);req.send(body),timeout&&(this.timeoutFlag=setTimeout(function(){_this.isTimeout=!0,req&&req.abort()},timeout))},HttpRequest}();exports["default"]=function(params){(new HttpRequest).send(params)}},{}]},{},[1])(1)});