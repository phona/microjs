!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).assure=t()}}(function(){var t={},e=function(){},n=function(){function t(){this.isTimeout=!1,this.timeoutFlag=null}return t.prototype.send=function(t){var n,o,r=this,s=t.headers||{},i=(t.method||"GET").toUpperCase(),u=void 0===t.async||t.async,c=t.success||e,a=t.error||e,f=t.timeout;if(s["Content-Type"]||(s["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),"GET"===i){var h="string"==typeof(l=t.data||"")?l:"?"+function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n].toString()));return e.join("&")}(l);n=t.data?t.url+h:t.url,o=null}else{var l=t.data||"";n=t.url,o="string"==typeof l?l:function(t){var e=[];for(var n in t)e.push(n+"="+t[n].toString());return""+e.join("&")}(l)}var d=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var t=0,e=["Microsoft","msxm3","msxml2","msxml1"];t<e.length;t++){var n=e[t];try{return new ActiveXObject(n+".XMLHTTP")}catch(o){}}return null}();for(var p in d.open(i,n,u),d.onreadystatechange=function(){if(4===d.readyState){if(void 0!==f){if(r.isTimeout)return;clearTimeout(r.timeoutFlag)}d.status>=200&&d.status<300||304===d.status?c(d.responseText):a(d.status,d.statusText)}},s)d.setRequestHeader(p,s[p]);d.send(o),f&&(this.timeoutFlag=setTimeout(function(){r.isTimeout=!0,d&&d.abort()},f))},t}();t.default=function(t){(new n).send(t)};var o,r={},s=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(t){function e(e,n){var o=this;return n||(n="HttpError: "+e),(o=t.call(this,n)||this).status=e,o.describe=n,o}return s(e,t),e}(Error);r.default=i;var u,c={includes:(void 0,function(t,e){return t.indexOf(e)>=0})},a={};a.__esModule=!0,a.post=a.get=a.all=a.wrap=void 0,function(t){t[t.PENDING=0]="PENDING",t[t.FULFILLED=1]="FULFILLED",t[t.REJECTED=2]="REJECTED"}(u||(u={}));var f=function(){},h=function(){function t(t){if(this.asyncfn=t,"function"!=typeof t)throw new TypeError("Assure resolver is not a function");this.children=[],this.result=null,this.state=u.PENDING,this.onResolved=null,this.onRejected=null}return t.prototype.getResult=function(){return this.result},t.prototype.pipe=function(t){t.state=this.state,this.then(function(e){t.state=u.FULFILLED,t.result=e,t.children.forEach(function(t){return t.process(e)})},function(e){t.state=u.REJECTED,t.result=e,t.children.forEach(function(t){return t.process(e)})})},t.prototype.process=function(e){if(this.result=e,e instanceof t)e.pipe(this);else if(e instanceof Error){var n=e;if(this.onRejected&&"function"==typeof this.onRejected)try{if((n=this.onRejected(e))instanceof t)return void n.pipe(this);this.result=n}catch(r){this.result=n=r}this.state=u.REJECTED,this.children.forEach(function(t){return t.process(n)})}else{var o=e;if(this.onResolved&&"function"==typeof this.onResolved)try{if(o=this.onResolved(e),this.state=u.FULFILLED,o instanceof t)return void o.pipe(this);void 0!==o&&(this.result=o)}catch(r){this.result=o=r,this.state=u.REJECTED}else this.state=u.FULFILLED;this.children.forEach(function(t){return t.process(o)})}},t.prototype.invokeAsyncFn=function(){var t=this;if(this.asyncfn!==f)try{this.asyncfn(function(e){t.state=u.FULFILLED,t.process(e)},function(e){t.state=u.REJECTED,t.process(e)})}catch(e){this.state=u.REJECTED,this.process(e)}},t.prototype.then=function(e,n){var o=new t(f);return o.onResolved=e,o.onRejected=n,this.children.push(o),this.state!==u.PENDING?o.process(this.result):this.invokeAsyncFn(),o},t.prototype.catch=function(e){var n=new t(f);return n.onRejected=e,this.children.push(n),this.state!==u.PENDING?n.process(this.result):this.invokeAsyncFn(),n},t}();function l(t){return new h(t)}function d(t){return new h(function(e,n){var o=[];t.forEach(function(r,s){r.then(function(n){o[s]=n,o.length!==t.length||c.includes(o,void 0)||e(o)}).catch(function(t){n(t)})})})}function p(e){return l(function(n,o){var s={url:e.url,method:"GET",data:e.data,headers:e.headers,timeout:e.timeout,async:e.async,success:function(t){return n(t)},error:function(t,e){return o(new r.default(t,e))}};t.default(s)})}function E(e){return l(function(n,o){var s={url:e.url,method:"POST",data:e.data,headers:e.headers,timeout:e.timeout,async:e.async,success:function(t){return n(t)},error:function(t,e){return o(new r.default(t,e))}};t.default(s)})}return a.wrap=l,a.all=d,a.get=p,a.post=E,a.default={wrap:l,all:d,get:p,post:E,HttpError:r.default,STATE:u},a});