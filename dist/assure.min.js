!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).assure=t()}}(function(){var t={};function e(){}var E=function(){function t(){this.isTimeout=!1,this.timeoutFlag=-1}return t.prototype.send=function(t){var E,n,r,T=this,u=t.headers||{},o=(t.method||"GET").toUpperCase(),s=void 0===t.async||t.async,i=t.success||e,O=t.error||e,_=t.timeout;if("GET"===o){var N="string"==typeof(R=t.data||"")?R:(r=R,Object.keys(r).reduce(function(t,e,E){return[t,0===E?"?":"&",e=encodeURIComponent(e),"=",encodeURIComponent(r[e])].join("")},""));E=t.data?t.url+N:t.url,n=null}else{var R=t.data||"";E=t.url,n="string"==typeof R?R:function(t){return Object.keys(t).reduce(function(e,E,n){return[e,0===n?"":"&",E,"=",t[E]].join("")},"")}(R)}var a=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var t=["Microsoft","msxm3","msxml2","msxml1"],e=0;e<t.length;e++)try{return new ActiveXObject(t[e]+".XMLHTTP")}catch(E){}}();for(var I in a.open(o,E,s),a.onreadystatechange=function(){if(4===a.readyState){if(void 0!==_){if(T.isTimeout)return;clearTimeout(T.timeoutFlag)}a.status>=200&&a.status<300||304===a.status?i(a.responseText):O(a.status,a.statusText)}},n&&function(t,e,E){t[e]=t[e]||"XMLHttpRequest"}(u,"X-Requested-With"),u)a.setRequestHeader(I,u[I]);a.send(n),_&&(this.timeoutFlag=setTimeout(function(){T.isTimeout=!0,a&&a.abort()},_))},t}();t.default=function(t){(new E).send(t)};var n,r={};(function(t){t[t.CONTINUE=100]="CONTINUE",t[t.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",t[t.PROCESSING=102]="PROCESSING",t[t.OK=200]="OK",t[t.CREATED=201]="CREATED",t[t.ACCEPTED=202]="ACCEPTED",t[t.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",t[t.NO_CONTENT=204]="NO_CONTENT",t[t.RESET_CONTENT=205]="RESET_CONTENT",t[t.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",t[t.MULTI_STATUS=207]="MULTI_STATUS",t[t.ALREADY_REPORTED=208]="ALREADY_REPORTED",t[t.IM_USED=226]="IM_USED",t[t.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",t[t.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",t[t.FOUND=302]="FOUND",t[t.SEE_OTHER=303]="SEE_OTHER",t[t.NOT_MODIFIED=304]="NOT_MODIFIED",t[t.USE_PROXY=305]="USE_PROXY",t[t.SWITCH_PROXY=306]="SWITCH_PROXY",t[t.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",t[t.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",t[t.BAD_REQUEST=400]="BAD_REQUEST",t[t.UNAUTHORIZED=401]="UNAUTHORIZED",t[t.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",t[t.FORBIDDEN=403]="FORBIDDEN",t[t.NOT_FOUND=404]="NOT_FOUND",t[t.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",t[t.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",t[t.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",t[t.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",t[t.CONFLICT=409]="CONFLICT",t[t.GONE=410]="GONE",t[t.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",t[t.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",t[t.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",t[t.URI_TOO_LONG=414]="URI_TOO_LONG",t[t.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",t[t.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",t[t.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",t[t.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",t[t.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",t[t.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",t[t.LOCKED=423]="LOCKED",t[t.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",t[t.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",t[t.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",t[t.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",t[t.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",t[t.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",t[t.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",t[t.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",t[t.BAD_GATEWAY=502]="BAD_GATEWAY",t[t.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",t[t.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",t[t.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",t[t.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",t[t.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",t[t.LOOP_DETECTED=508]="LOOP_DETECTED",t[t.NOT_EXTENDED=510]="NOT_EXTENDED",t[t.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(n||(n={})),r.default=n;var T={};Object.defineProperty(T,"__esModule",{value:!0});var u=function(){function t(){}return t.getNamesAndValues=function(t){return this.getNames(t).map(function(e){return{name:e,value:t[e]}})},t.getNames=function(t){return Object.keys(t).filter(function(t){return isNaN(+t)})},t.getNameFromValue=function(t,e){var E=this.getNamesAndValues(t).filter(function(t){return t.value===e});return 1==E.length?E[0].name:null},t.getValues=function(t){return this.getNames(t).map(function(e){return t[e]})},t}();T.EnumValues=u;var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.EnumValues=T.EnumValues;var s,i,O={},_=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var E in e)e.hasOwnProperty(E)&&(t[E]=e[E])})(t,e)},function(t,e){function E(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(E.prototype=e.prototype,new E)});O.__esModule=!0,function(t){t[t.PENDING=0]="PENDING",t[t.FULFILLED=1]="FULFILLED",t[t.REJECTED=2]="REJECTED"}(i||(i={}));var N=function(){function t(t,e){this.state=i.PENDING,this.value=null,this.children=[],this.onResolved=t,this.onRejected=e}return t.makeAssureChain=function(e){var E=new t(e);return E.process(),E},t.prototype.reset=function(){return this.state=i.PENDING,this.value=null,this.children=[],this},t.prototype.resolve=function(t){this.value=t,this.state=i.FULFILLED,this.process()},t.prototype.reject=function(t){this.value=t,this.state=i.REJECTED,this.process()},t.prototype.then=function(e,E){var n=new t(e,E);return this.children.push(n),this.state!==i.PENDING&&(n.value=this.value,n.process()),n},t.prototype.catch=function(e){var E=new t(null,e);return this.children.push(E),E},t.prototype.process=function(){var e=this;if(this.state<i.FULFILLED)try{if(this.value instanceof Error)this.onRejected?this.onRejected.call(this,this.value):this.children.forEach(function(t){t.value=e.value,t.process()});else{var E=this.onResolved.call(this,this.value);E instanceof t&&E.then(function(t){return e.resolve(t)},function(t){return e.reject(t)})}}catch(n){this.value=n,this.state=i.REJECTED,this.children.forEach(function(t){t.value=e.value,t.process()})}else this.children.forEach(function(t){t.value=e.value,t.process()})},t}(),R=function(t){function e(e,E){var n=this;return E||(E=o.EnumValues.getNameFromValue(r.default,e).split("_").join(" ")),(n=t.call(this,E)||this).status=e,n.describe=E,n}return _(e,t),e}(Error);function a(t){return N.makeAssureChain(t)}function I(e,E,n){return a(function(){var r=this,T={url:e,data:E,success:function(t){return r.resolve(t)},error:function(t,e){return r.reject(new R(t,e))}};for(var u in n)T[u]=n[u];t.default(T)})}function A(e,E,n){return a(function(){var r=this,T={url:e,data:E,method:"POST",success:function(t){return r.resolve(t)},error:function(t,e){return r.reject(new R(t,e))}};for(var u in n)T[u]=n[u];t.default(T)})}return O.wrap=a,O.get=I,O.post=A,O.default={wrap:a,get:I,post:A},O});