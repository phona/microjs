!function(E){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=E();else if("function"==typeof define&&define.amd)define([],E);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).assure=E()}}(function(){var E={};function t(){}var e=function(){function E(){this.isTimeout=!1,this.timeoutFlag=null}return E.prototype.send=function(E){var e,n,T=this,r=E.headers||{},o=(E.method||"GET").toUpperCase(),s=void 0===E.async||E.async,i=E.success||t,_=E.error||t,O=E.timeout;if(r["Content-Type"]||(r["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),"GET"===o){var R="string"==typeof(u=E.data||"")?u:function(E){var t=[];for(var e in E)t.push(encodeURIComponent(e)+"="+encodeURIComponent(E[e]));return"?"+t.join("&")}(u);e=E.data?E.url+R:E.url,n=null}else{var u=E.data||"";e=E.url,n="string"==typeof u?u:function(E){var t=[];for(var e in E)t.push(e+"="+E[e]);return""+t.join("&")}(u)}var N,I=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;for(var E=["Microsoft","msxm3","msxml2","msxml1"],t=0;t<E.length;t++)try{return new ActiveXObject(E[t]+".XMLHTTP")}catch(e){}}();for(var A in I.open(o,e,s),I.onreadystatechange=function(){if(4===I.readyState){if(void 0!==O){if(T.isTimeout)return;clearTimeout(T.timeoutFlag)}I.status>=200&&I.status<300||304===I.status?i(I.responseText):_(I.status,I.statusText)}},n&&("XMLHttpRequest",(N=r)["X-Requested-With"]=N["X-Requested-With"]||"XMLHttpRequest"),r)I.setRequestHeader(A,r[A]);I.send(n),O&&(this.timeoutFlag=setTimeout(function(){T.isTimeout=!0,I&&I.abort()},O))},E}();E.default=function(E){(new e).send(E)};var n,T={};(function(E){E[E.CONTINUE=100]="CONTINUE",E[E.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",E[E.PROCESSING=102]="PROCESSING",E[E.OK=200]="OK",E[E.CREATED=201]="CREATED",E[E.ACCEPTED=202]="ACCEPTED",E[E.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",E[E.NO_CONTENT=204]="NO_CONTENT",E[E.RESET_CONTENT=205]="RESET_CONTENT",E[E.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",E[E.MULTI_STATUS=207]="MULTI_STATUS",E[E.ALREADY_REPORTED=208]="ALREADY_REPORTED",E[E.IM_USED=226]="IM_USED",E[E.MULTIPLE_CHOICES=300]="MULTIPLE_CHOICES",E[E.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",E[E.FOUND=302]="FOUND",E[E.SEE_OTHER=303]="SEE_OTHER",E[E.NOT_MODIFIED=304]="NOT_MODIFIED",E[E.USE_PROXY=305]="USE_PROXY",E[E.SWITCH_PROXY=306]="SWITCH_PROXY",E[E.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",E[E.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",E[E.BAD_REQUEST=400]="BAD_REQUEST",E[E.UNAUTHORIZED=401]="UNAUTHORIZED",E[E.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",E[E.FORBIDDEN=403]="FORBIDDEN",E[E.NOT_FOUND=404]="NOT_FOUND",E[E.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",E[E.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",E[E.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",E[E.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",E[E.CONFLICT=409]="CONFLICT",E[E.GONE=410]="GONE",E[E.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",E[E.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",E[E.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",E[E.URI_TOO_LONG=414]="URI_TOO_LONG",E[E.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",E[E.RANGE_NOT_SATISFIABLE=416]="RANGE_NOT_SATISFIABLE",E[E.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",E[E.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",E[E.MISDIRECTED_REQUEST=421]="MISDIRECTED_REQUEST",E[E.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",E[E.LOCKED=423]="LOCKED",E[E.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",E[E.UPGRADE_REQUIRED=426]="UPGRADE_REQUIRED",E[E.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",E[E.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",E[E.REQUEST_HEADER_FIELDS_TOO_LARGE=431]="REQUEST_HEADER_FIELDS_TOO_LARGE",E[E.UNAVAILABLE_FOR_LEGAL_REASONS=451]="UNAVAILABLE_FOR_LEGAL_REASONS",E[E.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",E[E.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",E[E.BAD_GATEWAY=502]="BAD_GATEWAY",E[E.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",E[E.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",E[E.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",E[E.VARIANT_ALSO_NEGOTIATES=506]="VARIANT_ALSO_NEGOTIATES",E[E.INSUFFICIENT_STORAGE=507]="INSUFFICIENT_STORAGE",E[E.LOOP_DETECTED=508]="LOOP_DETECTED",E[E.NOT_EXTENDED=510]="NOT_EXTENDED",E[E.NETWORK_AUTHENTICATION_REQUIRED=511]="NETWORK_AUTHENTICATION_REQUIRED"})(n||(n={})),T.default=n;var r,o,s={},i=this&&this.__extends||(r=function(E,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,t){E.__proto__=t}||function(E,t){for(var e in t)t.hasOwnProperty(e)&&(E[e]=t[e])})(E,t)},function(E,t){function e(){this.constructor=E}r(E,t),E.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)});s.__esModule=!0,function(E){E[E.PENDING=0]="PENDING",E[E.FULFILLED=1]="FULFILLED",E[E.REJECTED=2]="REJECTED"}(o||(o={}));var _=function(){function E(E,t){this.state=o.PENDING,this.value=null,this.children=[],this.onResolved=E,this.onRejected=t}return E.makeAssureChain=function(t){var e=new E(t);return e.process(),e},E.prototype.reset=function(){return this.state=o.PENDING,this.value=null,this.children=[],this},E.prototype.resolve=function(E){this.value=E,this.state=o.FULFILLED,this.process()},E.prototype.reject=function(E){this.value=E,this.state=o.REJECTED,this.process()},E.prototype.then=function(t,e){var n=new E(t,e);return this.children.push(n),this.state!==o.PENDING&&(n.value=this.value,n.process()),n},E.prototype.catch=function(t){var e=new E(null,t);return this.children.push(e),e},E.prototype.process=function(){var t=this;if(this.state<o.FULFILLED)try{if(this.value instanceof Error)this.onRejected?this.onRejected.call(this,this.value):this.children.forEach(function(E){E.value=t.value,E.process()});else{var e=this.onResolved.call(this,this.value);e instanceof E&&e.then(function(E){return t.resolve(E)},function(E){return t.reject(E)})}}catch(n){this.value=n,this.state=o.REJECTED,this.children.forEach(function(E){E.value=t.value,E.process()})}else this.children.forEach(function(E){E.value=t.value,E.process()})},E}(),O=function(E){function t(t,e){var n=this;return e||(e=T.default[t].split("_").join(" ")||""),(n=E.call(this,e)||this).status=t,n.describe=e,n}return i(t,E),t}(Error);function R(E){return _.makeAssureChain(E)}function u(t,e,n){return R(function(){var T=this,r={url:t,data:e,success:function(E){return T.resolve(E)},error:function(E,t){return T.reject(new O(E,t))}};for(var o in n)r[o]=n[o];E.default(r)})}function N(t,e,n){return R(function(){var T=this,r={url:t,data:e,method:"POST",success:function(E){return T.resolve(E)},error:function(E,t){return T.reject(new O(E,t))}};for(var o in n)r[o]=n[o];E.default(r)})}return s.wrap=R,s.get=u,s.post=N,s.default={wrap:R,get:u,post:N},s});